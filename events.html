<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Public Complaint Tracking - Nagrik Setu</title>
    <style>
        /* Sections */
        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            border-bottom: 2px solid #0066cc;
            padding-bottom: 5px;
            color: #0066cc;
        }

        /* Complaint Cards */
        .complaint-card {
            background-color: aliceblue;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
            width: auto;
            box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
            border-left: 6px solid #0066cc;
            /* Default left border color */
            transition: transform 0.2s ease;
        }

        .complaint-card:hover {
            transform: translateX(15px);
            font-weight: bold;
        }

        /* Complaint details */
        .complaint-card .complaint-details p {
            margin: 5px 0;
            font-size: 14px;
            color: #333;
        }

        /* Status Badge */
        .status {
            display: inline-block;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85rem;
            color: white;
        }

        /* Match border-left with status color */
        .complaint-card.upcoming {
            border-left: 6px solid #ffcc00;
        }

        .complaint-card.in-progress,
        .complaint-card.inprogress {
            border-left: 6px solid #ff9800;
        }

        .complaint-card.completed {
            border-left: 6px solid #4caf50;
        }

        .complaint-card.scheduled {
            border-left: 6px solid #0066cc;
        }

        .complaint-card.pending {
            border-left: 6px solid #9c27b0;
        }

        .complaint-card.overdue {
            border-left: 6px solid #f44336;
        }

        /* Status Colors */

        .status.upcoming {
            background-color: #ffcc00;
            color: black;
        }

        .status.in-progress {
            background-color: #ff9800;
        }

        .status.inprogress {
            background-color: #ff9800;
        }

        .status.completed {
            background-color: #4caf50;
        }

        .status.scheduled {
            background-color: #0066cc;
        }

        .status.pending {
            background-color: #9c27b0;
        }

        .status.overdue {
            background-color: #f44336;
        }

        /* Empty section text */
        .empty {
            font-style: italic;
            color: #777;
        }
    </style>
</head>

<body class="home-page">

    <header>
        <h1>Upcoming and Past Events</h1>
        <p>Stay tuned for our upcoming events and activities.</p>
    </header>
    <nav class="about-nav">
        <div id="home"><a href="index.html">Home</a></div>
        <div id="register"><a href="register.html">Citizen Register</a></div>
        <div id="login"><a href="login.html">Citizen Login</a></div>
        <div id="register-complaint"><a href="register-complaint.html">Register Complaint</a></div>
        <div id="track-complaint"><a href="track-complaint.html">Track Complaint</a></div>
        <div id="official-login"><a href="official-login.html">Official Login</a></div>
        <div id="about"><a href="about.html">About</a></div>
        <div id="contact"><a href="contact.html">Contact</a></div>
        <div id="faq"><a href="faq.html">FAQ</a></div>
    </nav>

    <div class="section" id="upcoming-section">
        <h2>Upcoming Fixes</h2>
        <div id="upcoming-list"></div>
    </div>

    <div class="section" id="inprogress-section">
        <h2>In-Progress Fixes</h2>
        <div id="inprogress-list"></div>
    </div>

    <div class="section" id="completed-section">
        <h2>Completed Fixes</h2>
        <div id="completed-list"></div>
    </div>

    <div class="section" id="scheduled-section">
        <h2>Scheduled Fixes</h2>
        <div id="scheduled-list"></div>
    </div>

    <div class="section" id="pending-section">
        <h2>Pending Fixes</h2>
        <div id="pending-list"></div>
    </div>

    <div class="section" id="overdue-section">
        <h2>Overdue Fixes</h2>
        <div id="overdue-list"></div>
    </div>


    <script>
        async function loadComplaints() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();

                // Map all sections by status
                const sectionMap = {
                    "upcoming": document.getElementById('upcoming-list'),
                    "in-progress": document.getElementById('inprogress-list'),
                    "completed": document.getElementById('completed-list'),
                    "scheduled": document.getElementById('scheduled-list'),
                    "pending": document.getElementById('pending-list'),
                    "overdue": document.getElementById('overdue-list')
                };

                if (data.length === 0) {
                    for (let key in sectionMap) {
                        sectionMap[key].innerHTML = `<p class="empty">No ${key.replace('-', ' ')} complaints.</p>`;
                    }
                    return;
                }

                data.forEach(complaint => {
                    const card = document.createElement('div');
                    card.classList.add('complaint-card');

                    // Normalize status for CSS and section mapping
                    const statusClass = complaint.status.toLowerCase().replace(/\s+/g, '-');

                    card.classList.add(statusClass);

                    card.innerHTML = `
                <div class="status ${statusClass}">${complaint.status}</div>
                <div class="complaint-details">
                    <p><strong>Complaint:</strong> ${complaint.description}</p>
                    <p><strong>By:</strong> ${complaint.complainantName}</p>
                    <p><strong>Contact:</strong> ${complaint.contactNo}</p>
                    <p><strong>Location:</strong> ${complaint.location}</p>
                    <p><strong>Date of Complaint:</strong> ${complaint.dateOfComplaint}</p>
                    ${complaint.dateOfIssueFixed ? `<p><strong>Date Fixed:</strong> ${complaint.dateOfIssueFixed}</p>` : ''}
                </div>
            `;
                    // âœ… Set border-left color same as status background
                    const statusElement = card.querySelector('.status');
                    card.style.borderLeftColor = window.getComputedStyle(statusElement).backgroundColor;

                    // Append card to the correct section
                    if (sectionMap[statusClass]) {
                        sectionMap[statusClass].appendChild(card);
                    } else {
                        console.warn("No section found for status:", complaint.status);
                    }
                });

            } catch (error) {
                console.error("Error loading complaints:", error);
            }
        }

        loadComplaints();

    </script>

</body>

</html>